
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="0xFable">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.4">
    
    
      
        <title>Capsule</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.bb3983ee.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="black">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Capsule" class="md-header__button md-logo" aria-label="Capsule" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Capsule
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API documentation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/0xfable/capsule/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    capsule
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Capsule" class="md-nav__button md-logo" aria-label="Capsule" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Capsule
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/0xfable/capsule/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    capsule
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        API documentation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    Commands
  </a>
  
    <nav class="md-nav" aria-label="Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds" class="md-nav__link">
    capsule.cmds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.deploy" class="md-nav__link">
    deploy
  </a>
  
    <nav class="md-nav" aria-label="deploy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.deploy.DeployCmd" class="md-nav__link">
    DeployCmd
  </a>
  
    <nav class="md-nav" aria-label="DeployCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.deploy.DeployCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.execute" class="md-nav__link">
    execute
  </a>
  
    <nav class="md-nav" aria-label="execute">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.execute.ExecuteCmd" class="md-nav__link">
    ExecuteCmd
  </a>
  
    <nav class="md-nav" aria-label="ExecuteCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.execute.ExecuteCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local" class="md-nav__link">
    local
  </a>
  
    <nav class="md-nav" aria-label="local">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local.LocalCmd" class="md-nav__link">
    LocalCmd
  </a>
  
    <nav class="md-nav" aria-label="LocalCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local.LocalCmd.get_localterra_repo" class="md-nav__link">
    get_localterra_repo()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local.LocalCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local.LocalCmd.run_docker_compose" class="md-nav__link">
    run_docker_compose()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.new" class="md-nav__link">
    new
  </a>
  
    <nav class="md-nav" aria-label="new">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.new.NewCmd" class="md-nav__link">
    NewCmd
  </a>
  
    <nav class="md-nav" aria-label="NewCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.new.NewCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.query" class="md-nav__link">
    query
  </a>
  
    <nav class="md-nav" aria-label="query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.query.QueryCmd" class="md-nav__link">
    QueryCmd
  </a>
  
    <nav class="md-nav" aria-label="QueryCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.query.QueryCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.verify" class="md-nav__link">
    verify
  </a>
  
    <nav class="md-nav" aria-label="verify">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.verify.VerifyCmd" class="md-nav__link">
    VerifyCmd
  </a>
  
    <nav class="md-nav" aria-label="VerifyCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.verify.VerifyCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lib-and-helpers" class="md-nav__link">
    Lib and Helpers
  </a>
  
    <nav class="md-nav" aria-label="Lib and Helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.abstractions.ACmd" class="md-nav__link">
    capsule.abstractions.ACmd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.abstractions.ACmd.ACmd" class="md-nav__link">
    ACmd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib" class="md-nav__link">
    capsule.lib
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.config_handler" class="md-nav__link">
    config_handler
  </a>
  
    <nav class="md-nav" aria-label="config_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.config_handler.get_config" class="md-nav__link">
    get_config()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.config_handler.get_config_file" class="md-nav__link">
    get_config_file()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.credential_handler" class="md-nav__link">
    credential_handler
  </a>
  
    <nav class="md-nav" aria-label="credential_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.credential_handler.get_mnemonic" class="md-nav__link">
    get_mnemonic()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer" class="md-nav__link">
    deployer
  </a>
  
    <nav class="md-nav" aria-label="deployer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer" class="md-nav__link">
    Deployer
  </a>
  
    <nav class="md-nav" aria-label="Deployer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.execute_contract" class="md-nav__link">
    execute_contract()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.instantiate_contract" class="md-nav__link">
    instantiate_contract()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.query_code_bytecode" class="md-nav__link">
    query_code_bytecode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.query_code_id" class="md-nav__link">
    query_code_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.query_contract" class="md-nav__link">
    query_contract()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.send_msg" class="md-nav__link">
    send_msg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.store_contract" class="md-nav__link">
    store_contract()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.logging_handler" class="md-nav__link">
    logging_handler
  </a>
  
    <nav class="md-nav" aria-label="logging_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.logging_handler.setup_logger" class="md-nav__link">
    setup_logger()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    Commands
  </a>
  
    <nav class="md-nav" aria-label="Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds" class="md-nav__link">
    capsule.cmds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.deploy" class="md-nav__link">
    deploy
  </a>
  
    <nav class="md-nav" aria-label="deploy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.deploy.DeployCmd" class="md-nav__link">
    DeployCmd
  </a>
  
    <nav class="md-nav" aria-label="DeployCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.deploy.DeployCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.execute" class="md-nav__link">
    execute
  </a>
  
    <nav class="md-nav" aria-label="execute">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.execute.ExecuteCmd" class="md-nav__link">
    ExecuteCmd
  </a>
  
    <nav class="md-nav" aria-label="ExecuteCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.execute.ExecuteCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local" class="md-nav__link">
    local
  </a>
  
    <nav class="md-nav" aria-label="local">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local.LocalCmd" class="md-nav__link">
    LocalCmd
  </a>
  
    <nav class="md-nav" aria-label="LocalCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local.LocalCmd.get_localterra_repo" class="md-nav__link">
    get_localterra_repo()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local.LocalCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.local.LocalCmd.run_docker_compose" class="md-nav__link">
    run_docker_compose()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.new" class="md-nav__link">
    new
  </a>
  
    <nav class="md-nav" aria-label="new">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.new.NewCmd" class="md-nav__link">
    NewCmd
  </a>
  
    <nav class="md-nav" aria-label="NewCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.new.NewCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.query" class="md-nav__link">
    query
  </a>
  
    <nav class="md-nav" aria-label="query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.query.QueryCmd" class="md-nav__link">
    QueryCmd
  </a>
  
    <nav class="md-nav" aria-label="QueryCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.query.QueryCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.verify" class="md-nav__link">
    verify
  </a>
  
    <nav class="md-nav" aria-label="verify">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.verify.VerifyCmd" class="md-nav__link">
    VerifyCmd
  </a>
  
    <nav class="md-nav" aria-label="VerifyCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.cmds.verify.VerifyCmd.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lib-and-helpers" class="md-nav__link">
    Lib and Helpers
  </a>
  
    <nav class="md-nav" aria-label="Lib and Helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.abstractions.ACmd" class="md-nav__link">
    capsule.abstractions.ACmd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.abstractions.ACmd.ACmd" class="md-nav__link">
    ACmd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib" class="md-nav__link">
    capsule.lib
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.config_handler" class="md-nav__link">
    config_handler
  </a>
  
    <nav class="md-nav" aria-label="config_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.config_handler.get_config" class="md-nav__link">
    get_config()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.config_handler.get_config_file" class="md-nav__link">
    get_config_file()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.credential_handler" class="md-nav__link">
    credential_handler
  </a>
  
    <nav class="md-nav" aria-label="credential_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.credential_handler.get_mnemonic" class="md-nav__link">
    get_mnemonic()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer" class="md-nav__link">
    deployer
  </a>
  
    <nav class="md-nav" aria-label="deployer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer" class="md-nav__link">
    Deployer
  </a>
  
    <nav class="md-nav" aria-label="Deployer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.execute_contract" class="md-nav__link">
    execute_contract()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.instantiate_contract" class="md-nav__link">
    instantiate_contract()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.query_code_bytecode" class="md-nav__link">
    query_code_bytecode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.query_code_id" class="md-nav__link">
    query_code_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.query_contract" class="md-nav__link">
    query_contract()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.send_msg" class="md-nav__link">
    send_msg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.deployer.Deployer.store_contract" class="md-nav__link">
    store_contract()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capsule.lib.logging_handler" class="md-nav__link">
    logging_handler
  </a>
  
    <nav class="md-nav" aria-label="logging_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capsule.lib.logging_handler.setup_logger" class="md-nav__link">
    setup_logger()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/0xfable/capsule/edit/master/docs/index.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="api-documentation">API documentation</h1>
<h2 id="commands">Commands</h2>


  <div class="doc doc-object doc-module">

<a id="capsule.cmds"></a>
    <div class="doc doc-contents first">




  <div class="doc doc-children">











  <div class="doc doc-object doc-module">



<h3 id="capsule.cmds.deploy" class="doc doc-heading">
        <code>deploy</code>



</h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="capsule.cmds.deploy.DeployCmd" class="doc doc-heading">
        <code>
DeployCmd            (<a title="capsule.abstractions.ACmd.ACmd" href="#capsule.abstractions.ACmd.ACmd">ACmd</a>)
        </code>



</h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>capsule/cmds/deploy.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">DeployCmd</span><span class="p">(</span><span class="n">ACmd</span><span class="p">):</span>

    <span class="n">CMD_NAME</span> <span class="o">=</span> <span class="s2">&quot;deploy&quot;</span>
    <span class="n">CMD_HELP</span> <span class="o">=</span> <span class="s2">&quot;Deploy a wasm contract artifact to a specified Terra Chain&quot;</span>
    <span class="n">CMD_USAGE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    $ capsule deploy -p ./my_contract.wasm -c columbus-5</span>
<span class="s2">    $ capsule deploy --path ./artifacts/my_contract.wasm --chain tequila-0004</span>
<span class="s2">    $ capsule deploy -p artifacts/capsule_test.wasm -i &#39;{&quot;count&quot;:17}&#39; -c bombay-12&quot;&quot;&quot;</span>
    <span class="n">CMD_DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Helper tool which enables you to programatically deploy a Wasm contract artifact to a chain as a code object and instantiate it&quot;</span>

    <span class="k">def</span> <span class="nf">initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Define usage and description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_USAGE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_DESCRIPTION</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;--package&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(required) Name of new or path to existing package&quot;</span><span class="p">)</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-i&quot;</span><span class="p">,</span> <span class="s2">&quot;--initmsg&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="p">{},</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) The initialization message for the contract you are trying to deploy. Must be a json-like str&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;--chain&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) A chain to deploy too. Defaults to localterra&quot;</span><span class="p">)</span>




    <span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Schema:</span>
<span class="sd">            Read Mnemonic from env as well as host to deploy on </span>
<span class="sd">            any specified chain/account </span>

<span class="sd">            Prepare defaults for the above</span>

<span class="sd">            Perform a store call for the wasm contract that was specified</span>

<span class="sd">            Verify the contract was stored with a new API call</span>

<span class="sd">            Instantiate the code object into a contract </span>

<span class="sd">            Return success. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting deployment&quot;</span><span class="p">)</span>
        <span class="c1"># Setup the Deployer with its lcd, fcd urls as well as the desired chain.</span>
        <span class="c1"># config = asyncio.run(get_config())</span>
        <span class="n">chain_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-lcd.terra.dev&quot;</span>
        <span class="n">chain_fcd_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-fcd.terra.dev&quot;</span>
        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
        <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
        <span class="c1"># config = asyncio.run(get_config())</span>
        <span class="c1"># # TODO: Review setting up a list of urls in project rather than just depending on settings in config</span>
        <span class="c1"># chain_url = config.get(&quot;networks&quot;, {}).get(args.chain, DEFAULT_TESTNET_CHAIN).get(&quot;chain_url&quot;)</span>
        <span class="c1"># chain_fcd_url = config.get(&quot;networks&quot;, {}).get(args.chain, DEFAULT_TESTNET_CHAIN).get(&quot;chain_fcd_url&quot;)</span>

        <span class="c1"># TODO: Validate Init_msg is wellformed json </span>

        <span class="n">deployer</span> <span class="o">=</span> <span class="n">Deployer</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">LCDClient</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">chain_url</span><span class="p">,</span> 
            <span class="n">chain_id</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">chain</span> <span class="ow">or</span> <span class="s2">&quot;bombay-12&quot;</span><span class="p">,</span>
            <span class="n">gas_prices</span><span class="o">=</span><span class="n">Coins</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">chain_fcd_url</span><span class="si">}</span><span class="s2">/v1/txs/gas_prices&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())))</span>

        <span class="c1"># # Attempt to store the provided package as a code object, the response will be a code ID if successful</span>
        <span class="n">stored_code_id</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">store_contract</span><span class="p">(</span><span class="n">contract_name</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">contract_path</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="p">))</span>
        <span class="c1"># Instantiate a contract using the stored code ID for our contract bundle</span>
        <span class="c1"># and an init msg which will be different depending on the contract.</span>
        <span class="n">instantiation_result</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">instantiate_contract</span><span class="p">(</span><span class="n">stored_code_id</span><span class="p">,</span> <span class="n">init_msg</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">initmsg</span><span class="p">)))</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully deployed contract artifact located at </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="si">}</span><span class="s2">. Contract address of instantiated contract is </span><span class="si">{</span><span class="n">instantiation_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  <div class="doc doc-object doc-method">



<h5 id="capsule.cmds.deploy.DeployCmd.run_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Schema:
Read Mnemonic from env as well as host to deploy on 
any specified chain/account </p>
<p>Prepare defaults for the above</p>
<p>Perform a store call for the wasm contract that was specified</p>
<p>Verify the contract was stored with a new API call</p>
<p>Instantiate the code object into a contract </p>
<p>Return success. </p>

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/deploy.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Schema:</span>
<span class="sd">        Read Mnemonic from env as well as host to deploy on </span>
<span class="sd">        any specified chain/account </span>

<span class="sd">        Prepare defaults for the above</span>

<span class="sd">        Perform a store call for the wasm contract that was specified</span>

<span class="sd">        Verify the contract was stored with a new API call</span>

<span class="sd">        Instantiate the code object into a contract </span>

<span class="sd">        Return success. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting deployment&quot;</span><span class="p">)</span>
    <span class="c1"># Setup the Deployer with its lcd, fcd urls as well as the desired chain.</span>
    <span class="c1"># config = asyncio.run(get_config())</span>
    <span class="n">chain_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-lcd.terra.dev&quot;</span>
    <span class="n">chain_fcd_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-fcd.terra.dev&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
    <span class="c1"># config = asyncio.run(get_config())</span>
    <span class="c1"># # TODO: Review setting up a list of urls in project rather than just depending on settings in config</span>
    <span class="c1"># chain_url = config.get(&quot;networks&quot;, {}).get(args.chain, DEFAULT_TESTNET_CHAIN).get(&quot;chain_url&quot;)</span>
    <span class="c1"># chain_fcd_url = config.get(&quot;networks&quot;, {}).get(args.chain, DEFAULT_TESTNET_CHAIN).get(&quot;chain_fcd_url&quot;)</span>

    <span class="c1"># TODO: Validate Init_msg is wellformed json </span>

    <span class="n">deployer</span> <span class="o">=</span> <span class="n">Deployer</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">LCDClient</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">chain_url</span><span class="p">,</span> 
        <span class="n">chain_id</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">chain</span> <span class="ow">or</span> <span class="s2">&quot;bombay-12&quot;</span><span class="p">,</span>
        <span class="n">gas_prices</span><span class="o">=</span><span class="n">Coins</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">chain_fcd_url</span><span class="si">}</span><span class="s2">/v1/txs/gas_prices&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())))</span>

    <span class="c1"># # Attempt to store the provided package as a code object, the response will be a code ID if successful</span>
    <span class="n">stored_code_id</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">store_contract</span><span class="p">(</span><span class="n">contract_name</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">contract_path</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="p">))</span>
    <span class="c1"># Instantiate a contract using the stored code ID for our contract bundle</span>
    <span class="c1"># and an init msg which will be different depending on the contract.</span>
    <span class="n">instantiation_result</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">instantiate_contract</span><span class="p">(</span><span class="n">stored_code_id</span><span class="p">,</span> <span class="n">init_msg</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">initmsg</span><span class="p">)))</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully deployed contract artifact located at </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="si">}</span><span class="s2">. Contract address of instantiated contract is </span><span class="si">{</span><span class="n">instantiation_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="capsule.cmds.execute" class="doc doc-heading">
        <code>execute</code>



</h3>

    <div class="doc doc-contents ">

      <p>Query command -- Used to perform queries on MultiChain contracts</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h4 id="capsule.cmds.execute.ExecuteCmd" class="doc doc-heading">
        <code>
ExecuteCmd            (<a title="capsule.abstractions.ACmd.ACmd" href="#capsule.abstractions.ACmd.ACmd">ACmd</a>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Execute command -- Used to execute actions on MultiChain contracts</p>

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/execute.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ExecuteCmd</span><span class="p">(</span><span class="n">ACmd</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute command -- Used to execute actions on MultiChain contracts</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CMD_NAME</span> <span class="o">=</span> <span class="s2">&quot;execute&quot;</span>
    <span class="n">CMD_HELP</span> <span class="o">=</span> <span class="s2">&quot;Attempt to execute an action on a given contract address.&quot;</span>
    <span class="n">CMD_USAGE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    $ capsule execute --contract &lt;addr&gt; --chain &lt;chain&gt; --msg &lt;msg&gt;&quot;&quot;&quot;</span>
    <span class="n">CMD_DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Helper tool which exposes the ability to prepare and sending ExecuteMsg&#39;s on chain specific contract addresses&quot;</span>

    <span class="k">def</span> <span class="nf">initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Define usage and description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_USAGE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_DESCRIPTION</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-a&quot;</span><span class="p">,</span> <span class="s2">&quot;--address&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(required) Contract Address to perform query on&quot;</span><span class="p">)</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="s2">&quot;--msg&quot;</span><span class="p">,</span>
                                <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                <span class="n">default</span><span class="o">=</span><span class="p">{},</span>
                                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) The execution message for the contract you are trying to execute an action on. Must be a json-like str&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;--chain&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) A chain to deploy too. Defaults to localterra&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Performing msg exectution on contract addr </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">chain_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-lcd.terra.dev&quot;</span>
        <span class="n">chain_fcd_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-fcd.terra.dev&quot;</span>

        <span class="n">deployer</span> <span class="o">=</span> <span class="n">Deployer</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">LCDClient</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">chain_url</span><span class="p">,</span> 
            <span class="n">chain_id</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">chain</span> <span class="ow">or</span> <span class="s2">&quot;bombay-12&quot;</span><span class="p">,</span>
            <span class="n">gas_prices</span><span class="o">=</span><span class="n">Coins</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">chain_fcd_url</span><span class="si">}</span><span class="s2">/v1/txs/gas_prices&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())))</span>

        <span class="n">exe_result</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">execute_contract</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">msg</span><span class="p">)))</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execute Result </span><span class="si">{</span><span class="n">exe_result</span><span class="si">}</span><span class="s2"> </span><span class="se">\n\n</span><span class="s2"> Execute Finished.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  <div class="doc doc-object doc-method">



<h5 id="capsule.cmds.execute.ExecuteCmd.run_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/execute.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Performing msg exectution on contract addr </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">chain_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-lcd.terra.dev&quot;</span>
    <span class="n">chain_fcd_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-fcd.terra.dev&quot;</span>

    <span class="n">deployer</span> <span class="o">=</span> <span class="n">Deployer</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">LCDClient</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">chain_url</span><span class="p">,</span> 
        <span class="n">chain_id</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">chain</span> <span class="ow">or</span> <span class="s2">&quot;bombay-12&quot;</span><span class="p">,</span>
        <span class="n">gas_prices</span><span class="o">=</span><span class="n">Coins</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">chain_fcd_url</span><span class="si">}</span><span class="s2">/v1/txs/gas_prices&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())))</span>

    <span class="n">exe_result</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">execute_contract</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">msg</span><span class="p">)))</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execute Result </span><span class="si">{</span><span class="n">exe_result</span><span class="si">}</span><span class="s2"> </span><span class="se">\n\n</span><span class="s2"> Execute Finished.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="capsule.cmds.local" class="doc doc-heading">
        <code>local</code>



</h3>

    <div class="doc doc-contents ">

      <p>Local command -- Used to spin up a local instance of localterra or your favorite multi-chain dev-env</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h4 id="capsule.cmds.local.LocalCmd" class="doc doc-heading">
        <code>
LocalCmd            (<a title="capsule.abstractions.ACmd.ACmd" href="#capsule.abstractions.ACmd.ACmd">ACmd</a>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Local command -- Used to spin up a local instance of localterra or your favorite multi-chain dev-env</p>

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/local.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">LocalCmd</span><span class="p">(</span><span class="n">ACmd</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Local command -- Used to spin up a local instance of localterra or your favorite multi-chain dev-env</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CMD_NAME</span> <span class="o">=</span> <span class="s2">&quot;local&quot;</span>
    <span class="n">CMD_HELP</span> <span class="o">=</span> <span class="s2">&quot;Attempt to setup a local chain instance using Git and Docker.&quot;</span>
    <span class="n">CMD_USAGE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    $ capsule local&quot;&quot;&quot;</span>
    <span class="n">CMD_DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Helper tool which attempts to git clone the localterra repo and then compose it as services which you can use for local dev env contract testing&quot;</span>

    <span class="k">def</span> <span class="nf">initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Define usage and description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_USAGE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_DESCRIPTION</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;--package&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(required) Name of new or path to existing package&quot;</span><span class="p">)</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="s2">&quot;--down&quot;</span><span class="p">,</span>
                                 <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_false&#39;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) Whether to spin down, include to spin down an instance&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;--chain&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) A chain to deploy too. Defaults to localterra&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Schema:</span>
<span class="sd">            Check if we already have a local terra, if so return the path</span>

<span class="sd">            If we don&#39;t git clone the localterra repo and then return the path</span>

<span class="sd">            Pass path to docker-compose and attempt to interact</span>

<span class="sd">            Return success.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting local setup of localterra&quot;</span><span class="p">)</span>
        <span class="c1"># Start by doing a git clone</span>
        <span class="c1"># Check if the repo is already cloned in the default location</span>
        <span class="n">repo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_localterra_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Localterra repo actions finished, now attempting to use its compose-file&quot;</span><span class="p">)</span>
        <span class="c1"># Spin up or down via compose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_docker_compose</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">dirname</span><span class="o">=</span><span class="n">repo</span><span class="o">.</span><span class="n">working_tree_dir</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finish docker interaction&quot;</span><span class="p">)</span>

        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Command run finished&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_localterra_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CLONE_LOCATION</span><span class="o">=</span><span class="n">DEFAULT_CLONE_PATH</span><span class="p">,</span> <span class="n">CLONE_REMOTE_URL</span><span class="o">=</span><span class="s2">&quot;git@github.com:terra-money/LocalTerra.git&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Attempts to get a localterra repository so that localterra can be interacted with.</span>
<span class="sd">        Note: Any compose spun up away from the capsule tool may not be accessible by the tool.</span>
<span class="sd">        You need to ensure you are passing the correct Docker Compose in order to use this tool to interact with your already deployed services</span>

<span class="sd">        Args:</span>
<span class="sd">            CLONE_LOCATION (str, optional): Where the repos will go, defaults to DEFAULT_CLONE_PATH which is &quot;~/.capsule/localterra-clones&quot;.</span>
<span class="sd">            CLONE_REMOTE_URL (str, optional): The git url to clone from. Defaults to &quot;git@github.com:terra-money/LocalTerra.git&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            git.Repo: The repo to be worked with</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">CLONE_LOCATION</span><span class="p">)):</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;localterra appears to be already cloned, skipped reclone&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">git</span><span class="o">.</span><span class="n">Repo</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">CLONE_LOCATION</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">git</span><span class="o">.</span><span class="n">Repo</span><span class="o">.</span><span class="n">clone_from</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">CLONE_REMOTE_URL</span><span class="p">,</span> <span class="n">to_path</span><span class="o">=</span><span class="n">CLONE_LOCATION</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_docker_compose</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;docker-compose.yml&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Take a directory and a filename for the compose and attempt to</span>
<span class="sd">        interact with docker-compose</span>

<span class="sd">        Args:</span>
<span class="sd">            dirname ([type]): The directory of the project where the compose file is</span>
<span class="sd">            filename (str, optional): The compose file name. Defaults to &quot;docker-compose.yml&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            process: The process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command_name</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;docker-compose&quot;</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span> <span class="s2">&quot;up&quot;</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">down</span> <span class="k">else</span> <span class="s2">&quot;down&quot;</span><span class="p">]</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[Compose Command] </span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command_name</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting compose command </span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">command_name</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">STDOUT</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">process</span><span class="p">:</span>
                <span class="k">while</span> <span class="n">process</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="c1"># process.terminate()</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Encountered an error : &quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">













  <div class="doc doc-object doc-method">



<h5 id="capsule.cmds.local.LocalCmd.get_localterra_repo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_localterra_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CLONE_LOCATION</span><span class="o">=</span><span class="s1">&#39;/Users/ryan/.capsule/localterra-clones&#39;</span><span class="p">,</span> <span class="n">CLONE_REMOTE_URL</span><span class="o">=</span><span class="s1">&#39;git@github.com:terra-money/LocalTerra.git&#39;</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Attempts to get a localterra repository so that localterra can be interacted with.
Note: Any compose spun up away from the capsule tool may not be accessible by the tool.
You need to ensure you are passing the correct Docker Compose in order to use this tool to interact with your already deployed services</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>CLONE_LOCATION</code></td>
        <td><code>str</code></td>
        <td><p>Where the repos will go, defaults to DEFAULT_CLONE_PATH which is "~/.capsule/localterra-clones".</p></td>
        <td><code>&#39;/Users/ryan/.capsule/localterra-clones&#39;</code></td>
      </tr>
      <tr>
        <td><code>CLONE_REMOTE_URL</code></td>
        <td><code>str</code></td>
        <td><p>The git url to clone from. Defaults to "git@github.com:terra-money/LocalTerra.git".</p></td>
        <td><code>&#39;git@github.com:terra-money/LocalTerra.git&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>git.Repo</code></td>
      <td><p>The repo to be worked with</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/cmds/local.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_localterra_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">CLONE_LOCATION</span><span class="o">=</span><span class="n">DEFAULT_CLONE_PATH</span><span class="p">,</span> <span class="n">CLONE_REMOTE_URL</span><span class="o">=</span><span class="s2">&quot;git@github.com:terra-money/LocalTerra.git&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Attempts to get a localterra repository so that localterra can be interacted with.</span>
<span class="sd">    Note: Any compose spun up away from the capsule tool may not be accessible by the tool.</span>
<span class="sd">    You need to ensure you are passing the correct Docker Compose in order to use this tool to interact with your already deployed services</span>

<span class="sd">    Args:</span>
<span class="sd">        CLONE_LOCATION (str, optional): Where the repos will go, defaults to DEFAULT_CLONE_PATH which is &quot;~/.capsule/localterra-clones&quot;.</span>
<span class="sd">        CLONE_REMOTE_URL (str, optional): The git url to clone from. Defaults to &quot;git@github.com:terra-money/LocalTerra.git&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        git.Repo: The repo to be worked with</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">CLONE_LOCATION</span><span class="p">)):</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;localterra appears to be already cloned, skipped reclone&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">git</span><span class="o">.</span><span class="n">Repo</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">CLONE_LOCATION</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">git</span><span class="o">.</span><span class="n">Repo</span><span class="o">.</span><span class="n">clone_from</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">CLONE_REMOTE_URL</span><span class="p">,</span> <span class="n">to_path</span><span class="o">=</span><span class="n">CLONE_LOCATION</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h5 id="capsule.cmds.local.LocalCmd.run_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Schema:
Check if we already have a local terra, if so return the path</p>
<p>If we don't git clone the localterra repo and then return the path</p>
<p>Pass path to docker-compose and attempt to interact</p>
<p>Return success.</p>

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/local.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Schema:</span>
<span class="sd">        Check if we already have a local terra, if so return the path</span>

<span class="sd">        If we don&#39;t git clone the localterra repo and then return the path</span>

<span class="sd">        Pass path to docker-compose and attempt to interact</span>

<span class="sd">        Return success.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting local setup of localterra&quot;</span><span class="p">)</span>
    <span class="c1"># Start by doing a git clone</span>
    <span class="c1"># Check if the repo is already cloned in the default location</span>
    <span class="n">repo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_localterra_repo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Localterra repo actions finished, now attempting to use its compose-file&quot;</span><span class="p">)</span>
    <span class="c1"># Spin up or down via compose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run_docker_compose</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">dirname</span><span class="o">=</span><span class="n">repo</span><span class="o">.</span><span class="n">working_tree_dir</span><span class="p">)</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Finish docker interaction&quot;</span><span class="p">)</span>

    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Command run finished&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="capsule.cmds.local.LocalCmd.run_docker_compose" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_docker_compose</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;docker-compose.yml&#39;</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Take a directory and a filename for the compose and attempt to
interact with docker-compose</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dirname</code></td>
        <td><code>[type]</code></td>
        <td><p>The directory of the project where the compose file is</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The compose file name. Defaults to "docker-compose.yml".</p></td>
        <td><code>&#39;docker-compose.yml&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>process</code></td>
      <td><p>The process</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/cmds/local.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_docker_compose</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;docker-compose.yml&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Take a directory and a filename for the compose and attempt to</span>
<span class="sd">    interact with docker-compose</span>

<span class="sd">    Args:</span>
<span class="sd">        dirname ([type]): The directory of the project where the compose file is</span>
<span class="sd">        filename (str, optional): The compose file name. Defaults to &quot;docker-compose.yml&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        process: The process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">command_name</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;docker-compose&quot;</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span> <span class="s2">&quot;up&quot;</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">down</span> <span class="k">else</span> <span class="s2">&quot;down&quot;</span><span class="p">]</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[Compose Command] </span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command_name</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting compose command </span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">command_name</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">STDOUT</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">process</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">process</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="c1"># process.terminate()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Encountered an error : &quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="capsule.cmds.new" class="doc doc-heading">
        <code>new</code>



</h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="capsule.cmds.new.NewCmd" class="doc doc-heading">
        <code>
NewCmd            (<a title="capsule.abstractions.ACmd.ACmd" href="#capsule.abstractions.ACmd.ACmd">ACmd</a>)
        </code>



</h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>capsule/cmds/new.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">NewCmd</span><span class="p">(</span><span class="n">ACmd</span><span class="p">):</span>

    <span class="n">CMD_NAME</span> <span class="o">=</span> <span class="s2">&quot;new&quot;</span>
    <span class="n">CMD_HELP</span> <span class="o">=</span> <span class="s2">&quot;Simple command to create a new cosmwasm smart contract. Unless specified, will use x&quot;</span>
    <span class="n">CMD_USAGE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    $ capsule new -p ./&lt;path_to_my_contracts_root&gt; -n my_new_contract</span>
<span class="s2">    $ capsule new --path ./&lt;path_to_my_contracts_root&gt; -n my_new_contract</span>
<span class="s2">    $ capsule new -p &lt;path_to_my_contracts_root&gt; -n my_new_contract -u &lt;other cosmwasm cargo codegen template&gt;&quot;&quot;&quot;</span>
    <span class="n">CMD_DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Simple command to create a new cosmwasm smart contract. Unless specified, will use x&quot;</span>

    <span class="k">def</span> <span class="nf">initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Define usage and description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_USAGE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_DESCRIPTION</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;--package&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(required) Name of new or path to existing package&quot;</span><span class="p">)</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="s2">&quot;--codeid&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;URL of your own template to use&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;--name&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Name of your new smart-contract package&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-b&quot;</span><span class="p">,</span> <span class="s2">&quot;--branch&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;0.16&quot;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Branch/Version of your new smart-contract package&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting cargo generate of new package&quot;</span><span class="p">)</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="p">)</span>
        <span class="n">contract_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">contract_dir</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Directory exists, use a diff name boss&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;cargo&#39;</span><span class="p">,</span> <span class="s1">&#39;generate&#39;</span><span class="p">,</span> <span class="s1">&#39;--git&#39;</span><span class="p">,</span> <span class="s1">&#39;https://github.com/CosmWasm/cw-template.git&#39;</span><span class="p">,</span> <span class="s1">&#39;--branch&#39;</span><span class="p">,</span>
                                     <span class="n">args</span><span class="o">.</span><span class="n">branch</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">],</span> <span class="n">cwd</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">grepexc</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;error code&quot;</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[New Contract] Contract creation finished&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  <div class="doc doc-object doc-method">



<h5 id="capsule.cmds.new.NewCmd.run_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/new.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting cargo generate of new package&quot;</span><span class="p">)</span>
    <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="p">)</span>
    <span class="n">contract_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">contract_dir</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Directory exists, use a diff name boss&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;cargo&#39;</span><span class="p">,</span> <span class="s1">&#39;generate&#39;</span><span class="p">,</span> <span class="s1">&#39;--git&#39;</span><span class="p">,</span> <span class="s1">&#39;https://github.com/CosmWasm/cw-template.git&#39;</span><span class="p">,</span> <span class="s1">&#39;--branch&#39;</span><span class="p">,</span>
                                 <span class="n">args</span><span class="o">.</span><span class="n">branch</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">],</span> <span class="n">cwd</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">grepexc</span><span class="p">:</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;error code&quot;</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[New Contract] Contract creation finished&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="capsule.cmds.query" class="doc doc-heading">
        <code>query</code>



</h3>

    <div class="doc doc-contents ">

      <p>Query command -- Used to perform queries on MultiChain contracts</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-class">



<h4 id="capsule.cmds.query.QueryCmd" class="doc doc-heading">
        <code>
QueryCmd            (<a title="capsule.abstractions.ACmd.ACmd" href="#capsule.abstractions.ACmd.ACmd">ACmd</a>)
        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Query command -- Used to perform queries on MultiChain contracts</p>

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/query.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">QueryCmd</span><span class="p">(</span><span class="n">ACmd</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query command -- Used to perform queries on MultiChain contracts</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">CMD_NAME</span> <span class="o">=</span> <span class="s2">&quot;query&quot;</span>
    <span class="n">CMD_HELP</span> <span class="o">=</span> <span class="s2">&quot;Attempt to perform a query on a given contract address.&quot;</span>
    <span class="n">CMD_USAGE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    $ capsule query --contract &lt;addr&gt; --chain=&lt;&gt; --query=&lt;query&gt;&quot;&quot;&quot;</span>
    <span class="n">CMD_DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Helper tool which exposes the ability to perform queries on chain specific contract addresses&quot;</span>

    <span class="k">def</span> <span class="nf">initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Define usage and description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_USAGE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_DESCRIPTION</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-a&quot;</span><span class="p">,</span> <span class="s2">&quot;--address&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(required) Contract Address to perform query on&quot;</span><span class="p">)</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;--query&quot;</span><span class="p">,</span>
                                <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                <span class="n">default</span><span class="o">=</span><span class="p">{},</span>
                                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) The query message for the contract you are trying to query. Must be a json-like str&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;--chain&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) A chain to deploy too. Defaults to localterra&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Performing query on contract addr </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">chain_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-lcd.terra.dev&quot;</span>
        <span class="n">chain_fcd_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-fcd.terra.dev&quot;</span>

        <span class="n">deployer</span> <span class="o">=</span> <span class="n">Deployer</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">LCDClient</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">chain_url</span><span class="p">,</span> 
            <span class="n">chain_id</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">chain</span> <span class="ow">or</span> <span class="s2">&quot;bombay-12&quot;</span><span class="p">,</span>
            <span class="n">gas_prices</span><span class="o">=</span><span class="n">Coins</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">chain_fcd_url</span><span class="si">}</span><span class="s2">/v1/txs/gas_prices&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())))</span>

        <span class="n">query_result</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">query_contract</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">query</span><span class="p">)))</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query Result </span><span class="si">{</span><span class="n">query_result</span><span class="si">}</span><span class="s2"> </span><span class="se">\n\n</span><span class="s2"> Query Finished.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  <div class="doc doc-object doc-method">



<h5 id="capsule.cmds.query.QueryCmd.run_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/query.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Performing query on contract addr </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">chain_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-lcd.terra.dev&quot;</span>
    <span class="n">chain_fcd_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-fcd.terra.dev&quot;</span>

    <span class="n">deployer</span> <span class="o">=</span> <span class="n">Deployer</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">LCDClient</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">chain_url</span><span class="p">,</span> 
        <span class="n">chain_id</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">chain</span> <span class="ow">or</span> <span class="s2">&quot;bombay-12&quot;</span><span class="p">,</span>
        <span class="n">gas_prices</span><span class="o">=</span><span class="n">Coins</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">chain_fcd_url</span><span class="si">}</span><span class="s2">/v1/txs/gas_prices&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())))</span>

    <span class="n">query_result</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">query_contract</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">query</span><span class="p">)))</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query Result </span><span class="si">{</span><span class="n">query_result</span><span class="si">}</span><span class="s2"> </span><span class="se">\n\n</span><span class="s2"> Query Finished.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="capsule.cmds.verify" class="doc doc-heading">
        <code>verify</code>



</h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h4 id="capsule.cmds.verify.VerifyCmd" class="doc doc-heading">
        <code>
VerifyCmd            (<a title="capsule.abstractions.ACmd.ACmd" href="#capsule.abstractions.ACmd.ACmd">ACmd</a>)
        </code>



</h4>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>capsule/cmds/verify.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">VerifyCmd</span><span class="p">(</span><span class="n">ACmd</span><span class="p">):</span>

    <span class="n">CMD_NAME</span> <span class="o">=</span> <span class="s2">&quot;verify&quot;</span>
    <span class="n">CMD_HELP</span> <span class="o">=</span> <span class="s2">&quot;Attempt to perform a smart contract verification against a given code id. Attempts to perform a deterministic comparison by compiling the provided contract into an optmized wasm and then comparing its checksum with the code_hash of the provided code ID code object. Note if you are running an M1 Mac or an ARM based machine you will not get perfect matches on verification as most production deployments are done from a Intel based machine.&quot;</span>
    <span class="n">CMD_USAGE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    $ capsule verify -p ./&lt;path_to_my_contracts_root&gt; -c columbus-5 -i 3</span>
<span class="s2">    $ capsule verify --path ./&lt;path_to_my_contracts_root&gt; --chain tequila-0004</span>
<span class="s2">    $ capsule verify -p &lt;path_to_my_contracts_root&gt; -c bombay-12 -i 300&quot;&quot;&quot;</span>
    <span class="n">CMD_DESCRIPTION</span> <span class="o">=</span> <span class="s2">&quot;Helper tool which enables you to perform a Smart Contract Verification (SCV) by providing the path to a single smart-contract repo and providing a code id. The project path is passed either to `cargo run-script optimize` or to a custom docker invocation for ARM64 to create an optmized production wasm of the contract for comparison. The code id is used to query a stored code object&#39;s byte_code on the respective chain. Once the byte_code is gathered we get the SHA256 of this to compare to our locally prepared optimized wasm. If the SHA265 of on chain code object matches the SHA256 checksum on the optimized build we have verified the contact. Note: The outputted SHA256 and locally build optimized build will be different on ARM vs Intel. An ARM machine can only really be used to verify images which were built and uploaded from an ARM machine&quot;</span>

    <span class="k">def</span> <span class="nf">initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Define usage and description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">usage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_USAGE</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CMD_DESCRIPTION</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;--package&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(required) Name of new or path to existing package&quot;</span><span class="p">)</span>

        <span class="c1"># Add any positional or optional arguments here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-i&quot;</span><span class="p">,</span> <span class="s2">&quot;--codeid&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The code_id to compare the provided contract against&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;--chain&quot;</span><span class="p">,</span>
                                 <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) A chain to deploy too. Defaults to localterra&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;--nobuild&quot;</span><span class="p">,</span>
                                 <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                                 <span class="n">help</span><span class="o">=</span><span class="s2">&quot;(Optional) Skip the building and go right to comparing the onchain code with your own. This assumes you already ran an optimized build and saves you rebuilding each time you run verify command&quot;</span><span class="p">)</span>




    <span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Schema:</span>
<span class="sd">            Read Mnemonic from env as well as host to deploy on </span>
<span class="sd">            any specified chain/account </span>

<span class="sd">            Prepare defaults for the above</span>

<span class="sd">            Prepare an optimized build using the appropiate technique </span>
<span class="sd">            If nobuild is provided; skip above and go right to the checksums.txt</span>

<span class="sd">            Query the byte_code from the lcd client </span>

<span class="sd">            Prepare a hash of the queried byte_code and compare </span>

<span class="sd">            Return success. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting verification&quot;</span><span class="p">)</span>
        <span class="c1"># Setup the Deployer with its lcd, fcd urls as well as the desired chain.</span>
        <span class="c1"># config = asyncio.run(get_config())</span>
        <span class="n">chain_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-lcd.terra.dev&quot;</span>
        <span class="n">chain_fcd_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-fcd.terra.dev&quot;</span>
        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
        <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
        <span class="c1"># config = asyncio.run(get_config())</span>
        <span class="c1"># # TODO: Review setting up a list of urls in project rather than just depending on settings in config</span>
        <span class="c1"># chain_url = config.get(&quot;networks&quot;, {}).get(args.chain, DEFAULT_TESTNET_CHAIN).get(&quot;chain_url&quot;)</span>
        <span class="c1"># chain_fcd_url = config.get(&quot;networks&quot;, {}).get(args.chain, DEFAULT_TESTNET_CHAIN).get(&quot;chain_fcd_url&quot;)</span>

        <span class="c1"># TODO: Validate Init_msg is wellformed json </span>

        <span class="n">deployer</span> <span class="o">=</span> <span class="n">Deployer</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">LCDClient</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">chain_url</span><span class="p">,</span> 
            <span class="n">chain_id</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">chain</span> <span class="ow">or</span> <span class="s2">&quot;bombay-12&quot;</span><span class="p">,</span>
            <span class="n">gas_prices</span><span class="o">=</span><span class="n">Coins</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">chain_fcd_url</span><span class="si">}</span><span class="s2">/v1/txs/gas_prices&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())))</span>



        <span class="n">contract_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="p">)</span>
        <span class="c1"># TODO: Refactor into a neater function </span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">nobuild</span><span class="p">:</span> 
            <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">uname</span><span class="p">()[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;arm64&quot;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># process = subprocess.run([&#39;docker&#39;, &#39;run&#39;, &#39;--rm&#39;, &#39;-v&#39;, &#39;&quot;$(pwd)&quot;:/code&#39;,</span>
                    <span class="c1"># &#39;--mount&#39;, &#39;type=volume,source=&quot;$(basename &quot;$(pwd)&quot;)_cache&quot;,target=/code/target&#39;,</span>
                    <span class="c1"># &#39;--mount&#39;, &#39;type=volume,source=registry_cache,target=/usr/local/cargo/registry&#39;,</span>
                    <span class="c1"># &#39;cosmwasm/rust-optimizer-arm64:0.12.4&#39;], cwd=contract_dir, check=True, stdout=subprocess.PIPE, universal_newlines=True)</span>

                    <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;docker run --rm -v &quot;$(pwd)&quot;:/code </span><span class="se">\</span>
<span class="s1">                            --mount type=volume,source=&quot;$(basename &quot;$(pwd)&quot;)_cache&quot;,target=/code/target </span><span class="se">\</span>
<span class="s1">                            --mount type=volume,source=registry_cache,target=/usr/local/cargo/registry </span><span class="se">\</span>
<span class="s1">                            cosmwasm/rust-optimizer-arm64:0.12.4&#39;</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="n">contract_dir</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

                    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>

                <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">grepexc</span><span class="p">:</span>                                                                                                   
                    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;error code&quot;</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;cargo&#39;</span><span class="p">,</span><span class="s1">&#39;run-script&#39;</span><span class="p">,</span><span class="s1">&#39;optimize&#39;</span><span class="p">],</span> <span class="n">cwd</span><span class="o">=</span><span class="n">contract_dir</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

                    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">grepexc</span><span class="p">:</span>                                                                                                   
                    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;error code&quot;</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>

        <span class="c1"># code_id_info = asyncio.run(deployer.query_code_id(args.codeid))</span>
        <span class="c1"># LOG.info(base64.b64decode(code_id_info[&#39;result&#39;][&#39;code_hash&#39;]))</span>
        <span class="n">code_byte_code</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">query_code_bytecode</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">codeid</span><span class="p">))</span>
        <span class="n">on_chain</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">()</span>
        <span class="n">on_chain</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">code_byte_code</span><span class="p">[</span><span class="s1">&#39;byte_code&#39;</span><span class="p">]))</span>
        <span class="c1"># LOG.info(on_chain.digest())</span>
        <span class="c1"># LOG.info(base64.b16encode(on_chain.digest()))</span>
        <span class="n">on_chain_code_sha</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b16encode</span><span class="p">(</span><span class="n">on_chain</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span>
        <span class="c1"># Get the hash from artifacts </span>
        <span class="c1"># TODO: Make less POC and more MVP, what if there are multiple checksums </span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">contract_dir</span><span class="o">+</span><span class="s2">&quot;/artifacts/checksums.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">first_line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
            <span class="n">sha_to_compare</span> <span class="o">=</span> <span class="n">first_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[SHA265 of code with id </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">codeid</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">on_chain_code_sha</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[SHA265 of code with path </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">sha_to_compare</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">sha_to_compare</span> <span class="o">==</span> <span class="n">on_chain_code_sha</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Verification]: Success. The provided contract wasm matches the provided code ID&#39;s byte_code hash&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Verification]: Failed. The provided contract wasm does not match the provided code ID&#39;s byte_code hash&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">














  <div class="doc doc-object doc-method">



<h5 id="capsule.cmds.verify.VerifyCmd.run_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span></code>


</h5>

    <div class="doc doc-contents ">

      <p>Schema:
Read Mnemonic from env as well as host to deploy on 
any specified chain/account </p>
<p>Prepare defaults for the above</p>
<p>Prepare an optimized build using the appropiate technique 
If nobuild is provided; skip above and go right to the checksums.txt</p>
<p>Query the byte_code from the lcd client </p>
<p>Prepare a hash of the queried byte_code and compare </p>
<p>Return success. </p>

        <details class="quote">
          <summary>Source code in <code>capsule/cmds/verify.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Schema:</span>
<span class="sd">        Read Mnemonic from env as well as host to deploy on </span>
<span class="sd">        any specified chain/account </span>

<span class="sd">        Prepare defaults for the above</span>

<span class="sd">        Prepare an optimized build using the appropiate technique </span>
<span class="sd">        If nobuild is provided; skip above and go right to the checksums.txt</span>

<span class="sd">        Query the byte_code from the lcd client </span>

<span class="sd">        Prepare a hash of the queried byte_code and compare </span>

<span class="sd">        Return success. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting verification&quot;</span><span class="p">)</span>
    <span class="c1"># Setup the Deployer with its lcd, fcd urls as well as the desired chain.</span>
    <span class="c1"># config = asyncio.run(get_config())</span>
    <span class="n">chain_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-lcd.terra.dev&quot;</span>
    <span class="n">chain_fcd_url</span><span class="o">=</span><span class="s2">&quot;https://bombay-fcd.terra.dev&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
    <span class="c1"># config = asyncio.run(get_config())</span>
    <span class="c1"># # TODO: Review setting up a list of urls in project rather than just depending on settings in config</span>
    <span class="c1"># chain_url = config.get(&quot;networks&quot;, {}).get(args.chain, DEFAULT_TESTNET_CHAIN).get(&quot;chain_url&quot;)</span>
    <span class="c1"># chain_fcd_url = config.get(&quot;networks&quot;, {}).get(args.chain, DEFAULT_TESTNET_CHAIN).get(&quot;chain_fcd_url&quot;)</span>

    <span class="c1"># TODO: Validate Init_msg is wellformed json </span>

    <span class="n">deployer</span> <span class="o">=</span> <span class="n">Deployer</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">LCDClient</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">chain_url</span><span class="p">,</span> 
        <span class="n">chain_id</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">chain</span> <span class="ow">or</span> <span class="s2">&quot;bombay-12&quot;</span><span class="p">,</span>
        <span class="n">gas_prices</span><span class="o">=</span><span class="n">Coins</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">chain_fcd_url</span><span class="si">}</span><span class="s2">/v1/txs/gas_prices&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">())))</span>



    <span class="n">contract_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="p">)</span>
    <span class="c1"># TODO: Refactor into a neater function </span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">nobuild</span><span class="p">:</span> 
        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">uname</span><span class="p">()[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;arm64&quot;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># process = subprocess.run([&#39;docker&#39;, &#39;run&#39;, &#39;--rm&#39;, &#39;-v&#39;, &#39;&quot;$(pwd)&quot;:/code&#39;,</span>
                <span class="c1"># &#39;--mount&#39;, &#39;type=volume,source=&quot;$(basename &quot;$(pwd)&quot;)_cache&quot;,target=/code/target&#39;,</span>
                <span class="c1"># &#39;--mount&#39;, &#39;type=volume,source=registry_cache,target=/usr/local/cargo/registry&#39;,</span>
                <span class="c1"># &#39;cosmwasm/rust-optimizer-arm64:0.12.4&#39;], cwd=contract_dir, check=True, stdout=subprocess.PIPE, universal_newlines=True)</span>

                <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;docker run --rm -v &quot;$(pwd)&quot;:/code </span><span class="se">\</span>
<span class="s1">                        --mount type=volume,source=&quot;$(basename &quot;$(pwd)&quot;)_cache&quot;,target=/code/target </span><span class="se">\</span>
<span class="s1">                        --mount type=volume,source=registry_cache,target=/usr/local/cargo/registry </span><span class="se">\</span>
<span class="s1">                        cosmwasm/rust-optimizer-arm64:0.12.4&#39;</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="n">contract_dir</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

                <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>

            <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">grepexc</span><span class="p">:</span>                                                                                                   
                <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;error code&quot;</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;cargo&#39;</span><span class="p">,</span><span class="s1">&#39;run-script&#39;</span><span class="p">,</span><span class="s1">&#39;optimize&#39;</span><span class="p">],</span> <span class="n">cwd</span><span class="o">=</span><span class="n">contract_dir</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

                <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">grepexc</span><span class="p">:</span>                                                                                                   
                <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;error code&quot;</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span> <span class="n">grepexc</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>

    <span class="c1"># code_id_info = asyncio.run(deployer.query_code_id(args.codeid))</span>
    <span class="c1"># LOG.info(base64.b64decode(code_id_info[&#39;result&#39;][&#39;code_hash&#39;]))</span>
    <span class="n">code_byte_code</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">deployer</span><span class="o">.</span><span class="n">query_code_bytecode</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">codeid</span><span class="p">))</span>
    <span class="n">on_chain</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">()</span>
    <span class="n">on_chain</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">code_byte_code</span><span class="p">[</span><span class="s1">&#39;byte_code&#39;</span><span class="p">]))</span>
    <span class="c1"># LOG.info(on_chain.digest())</span>
    <span class="c1"># LOG.info(base64.b16encode(on_chain.digest()))</span>
    <span class="n">on_chain_code_sha</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b16encode</span><span class="p">(</span><span class="n">on_chain</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span>
    <span class="c1"># Get the hash from artifacts </span>
    <span class="c1"># TODO: Make less POC and more MVP, what if there are multiple checksums </span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">contract_dir</span><span class="o">+</span><span class="s2">&quot;/artifacts/checksums.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">first_line</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="n">sha_to_compare</span> <span class="o">=</span> <span class="n">first_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[SHA265 of code with id </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">codeid</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">on_chain_code_sha</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[SHA265 of code with path </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">package</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">sha_to_compare</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">sha_to_compare</span> <span class="o">==</span> <span class="n">on_chain_code_sha</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Verification]: Success. The provided contract wasm matches the provided code ID&#39;s byte_code hash&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Verification]: Failed. The provided contract wasm does not match the provided code ID&#39;s byte_code hash&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>




  </div>

    </div>

  </div>

<h2 id="lib-and-helpers">Lib and Helpers</h2>


  <div class="doc doc-object doc-module">

<a id="capsule.abstractions.ACmd"></a>
    <div class="doc doc-contents first">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h3 id="capsule.abstractions.ACmd.ACmd" class="doc doc-heading">
        <code>
ACmd        </code>



</h3>

    <div class="doc doc-contents ">

      <p>ACmd is an abstraction that helps to
define a consistant minimal interface for
each command in this CLI.
When a class is a subclass of this you have the assurance:
The class is-a command of some sort
It has info for its Name, Description, Example Usage and Help
It has a run_command function to execute</p>

        <details class="quote">
          <summary>Source code in <code>capsule/abstractions/ACmd.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ACmd</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;ACmd is an abstraction that helps to</span>
<span class="sd">    define a consistant minimal interface for</span>
<span class="sd">    each command in this CLI.</span>
<span class="sd">    When a class is a subclass of this you have the assurance:</span>
<span class="sd">    The class is-a command of some sort</span>
<span class="sd">    It has info for its Name, Description, Example Usage and Help</span>
<span class="sd">    It has a run_command function to execute</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">REQUIRED_FIELDS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cmd_name&#39;</span><span class="p">,</span> <span class="s1">&#39;cmd_description&#39;</span><span class="p">,</span> <span class="s1">&#39;cmd_help&#39;</span><span class="p">,</span> <span class="s1">&#39;cmd_usage&#39;</span><span class="p">]</span>


    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_parser</span><span class="p">):</span>
        <span class="c1"># Raise an exception if a subclass does not set values for all of the required fields</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">REQUIRED_FIELDS</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Command did not implement all the required fields&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">sub_parser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CMD_NAME</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">CMD_HELP</span><span class="p">,</span>
                            <span class="n">formatter_class</span><span class="o">=</span><span class="n">HelpFormatter</span><span class="p">,</span>
                            <span class="n">parents</span><span class="o">=</span><span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">initialise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">















  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">

<a id="capsule.lib"></a>
    <div class="doc doc-contents first">




  <div class="doc doc-children">










  <div class="doc doc-object doc-module">



<h3 id="capsule.lib.config_handler" class="doc doc-heading">
        <code>config_handler</code>



</h3>

    <div class="doc doc-contents ">

      <p>Load configuration from .toml file.</p>



  <div class="doc doc-children">










  <div class="doc doc-object doc-function">



<h4 id="capsule.lib.config_handler.get_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_config</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Simple function which takes a config_file
and attempts to parse it as a toml config
returning the parsed result as a dict</p>

        <details class="quote">
          <summary>Source code in <code>capsule/lib/config_handler.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="n">config_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Simple function which takes a config_file</span>
<span class="sd">    and attempts to parse it as a toml config</span>
<span class="sd">    returning the parsed result as a dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">get_config_file</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">config_path</span><span class="p">)</span>
    <span class="c1"># Read toml file</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">toml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found these networks available: </span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;networks&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found this deployment info: </span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;deploy_info&#39;</span><span class="p">][</span><span class="s1">&#39;mnemonic&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">config</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h4 id="capsule.lib.config_handler.get_config_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_config_file</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Attempts to get the location of 
the capsule config. 
One of 4 things occurs here, either:
- A config location is gathered from the environment
- A specified filename is provided and a config file with this name is created
- A specified filename is provided and if a config file with this name if found in the current dir then this is used
- A default config file is created in the ~/.capsule directory</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>[str]</code></td>
        <td><p>A specified filename to create for config. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>[str]</code></td>
      <td><p>[The config files path.]</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/lib/config_handler.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_config_file</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Attempts to get the location of </span>
<span class="sd">    the capsule config. </span>
<span class="sd">    One of 4 things occurs here, either:</span>
<span class="sd">    - A config location is gathered from the environment</span>
<span class="sd">    - A specified filename is provided and a config file with this name is created</span>
<span class="sd">    - A specified filename is provided and if a config file with this name if found in the current dir then this is used</span>
<span class="sd">    - A default config file is created in the ~/.capsule directory</span>

<span class="sd">    Args:</span>
<span class="sd">        filename ([str], optional): A specified filename to create for config. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [str]: [The config files path.]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># First check if there is a specified location in the env</span>
    <span class="n">env_config_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">DEFAULT_CONFIG_FILE_ENV_VAR</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># If a config was specified in the env, this takes priority</span>
    <span class="k">if</span> <span class="n">env_config_file</span><span class="p">:</span> <span class="k">return</span> <span class="n">env_config_file</span>

    <span class="c1"># If a filename was provided use this as the config file name</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span> <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expandvars</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>

    <span class="c1"># Otherwise use a default one located in the .capsule directory at the home dir</span>
    <span class="n">config_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="s2">&quot;.capsule&quot;</span><span class="p">,</span> <span class="n">DEFAULT_CONFIG_FILE_NAME</span><span class="p">))</span>
    <span class="n">capsule_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
    <span class="c1"># Check if the capsule directory has been created and if not, create it.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">capsule_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">capsule_dir</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">config_file</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="capsule.lib.credential_handler" class="doc doc-heading">
        <code>credential_handler</code>



</h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h4 id="capsule.lib.credential_handler.get_mnemonic" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_mnemonic</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">

      <p>Attempt to gather a mnemonic from one of the available sources
First, if a mnemonic is defined in the env, use that.
Next, check the config file for the secret 
If no mnemonic can be found, optionally raise an Exception</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>strict</code></td>
        <td><code>bool</code></td>
        <td><p>When set to true, if no mnemonic is found an exception is raised. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The mnemonic found either in the env or in the config file</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/lib/credential_handler.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_mnemonic</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Attempt to gather a mnemonic from one of the available sources</span>
<span class="sd">    First, if a mnemonic is defined in the env, use that.</span>
<span class="sd">    Next, check the config file for the secret </span>
<span class="sd">    If no mnemonic can be found, optionally raise an Exception</span>


<span class="sd">    Args:</span>
<span class="sd">        strict (bool, optional): When set to true, if no mnemonic is found an exception is raised. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The mnemonic found either in the env or in the config file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CAPSULE_MNEMONIC&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;CAPSULE_MNEMONIC&quot;</span><span class="p">]</span>

    <span class="n">config</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_config</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;deploy_info&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mnemonic&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;deploy_info&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mnemonic&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No Mnemonic was found either in the specified config file or in the environment. Strict mode is set to true&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="capsule.lib.deployer" class="doc doc-heading">
        <code>deployer</code>



</h3>

    <div class="doc doc-contents ">




  <div class="doc doc-children">







  <div class="doc doc-object doc-class">



<h4 id="capsule.lib.deployer.Deployer" class="doc doc-heading">
        <code>
Deployer        </code>



</h4>

    <div class="doc doc-contents ">

      <p>Deployer is a simple facade object
providing an interface towards general deployment
actions such as sending messages, getting addresses,
uploading code objects, instantiating them into contracts
and also executing or querying those contracts</p>

        <details class="quote">
          <summary>Source code in <code>capsule/lib/deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Deployer</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Deployer is a simple facade object</span>
<span class="sd">    providing an interface towards general deployment</span>
<span class="sd">    actions such as sending messages, getting addresses,</span>
<span class="sd">    uploading code objects, instantiating them into contracts</span>
<span class="sd">    and also executing or querying those contracts</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">LCDClient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mnemonic</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">get_mnemonic</span><span class="p">())</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mnemonic</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deployer</span> <span class="o">=</span> <span class="n">Wallet</span><span class="p">(</span><span class="n">lcd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">MnemonicKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mnemonic</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">std_fee</span> <span class="o">=</span> <span class="n">StdFee</span><span class="p">(</span><span class="mi">4000000</span><span class="p">,</span> <span class="s2">&quot;600000uluna&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">send_msg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;send_msg attempts to create </span>
<span class="sd">        and sign a transaction with the provided</span>
<span class="sd">        msg and then broadcasts the tx</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">create_and_sign_tx</span><span class="p">(</span>
            <span class="n">msgs</span><span class="o">=</span><span class="p">[</span><span class="n">msg</span><span class="p">],</span> <span class="n">fee</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">std_fee</span>
        <span class="p">)</span>
        <span class="c1"># estimated = self.client.tx.estimate_fee(tx, fee_denoms=[&quot;uusd&quot;], msgs=[msg])</span>
        <span class="c1"># LOG.info(f&#39;estimated fee: {estimated}&#39;)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">tx</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">store_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">contract_path</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;store_contract attempts to </span>
<span class="sd">        gather a given wasm artifact file </span>
<span class="sd">        and upload it to the given chain as a StoredCodeObject</span>
<span class="sd">        The storage operation is done using the send_msg helper</span>

<span class="sd">        Args:</span>
<span class="sd">            contract_name (str): The name of the contract to deploy</span>
<span class="sd">            contract_path (str, optional): The path to a wasm contract artifact to deploy. Defaults to &quot;&quot;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The contract storage result is parsed and just the code id of the stored code object is returned</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If the full path was provided, use it else assume its located in artifacts</span>
        <span class="nb">bytes</span> <span class="o">=</span> <span class="n">read_file_as_b64</span><span class="p">(</span><span class="n">contract_path</span> <span class="k">if</span> <span class="n">contract_path</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;artifacts/</span><span class="si">{</span><span class="n">contract_name</span><span class="si">}</span><span class="s2">.wasm&quot;</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">MsgStoreCode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">acc_address</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
        <span class="n">contract_storage_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_msg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">contract_storage_result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">get_code_id</span><span class="p">(</span><span class="n">contract_storage_result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">instantiate_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">init_msg</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;instantiate_contract attempts to </span>
<span class="sd">        instantiate a code object with an init msg </span>
<span class="sd">        into a live contract on the network. </span>

<span class="sd">        Args:</span>
<span class="sd">            code_id (str): The code_id of the stored wasm contract artifact</span>
<span class="sd">            init_msg (dict): The init msg to send to setup the contract</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The contracts address</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">MsgInstantiateContract</span><span class="p">(</span>
            <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">acc_address</span><span class="p">,</span>
            <span class="n">admin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">acc_address</span><span class="p">,</span>
            <span class="n">code_id</span><span class="o">=</span><span class="n">code_id</span><span class="p">,</span>
            <span class="n">init_msg</span><span class="o">=</span><span class="n">init_msg</span>
        <span class="p">)</span>

        <span class="n">instantiation_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_msg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">instantiation_result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">get_contract_address</span><span class="p">(</span><span class="n">instantiation_result</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">execute_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_addr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">execute_msg</span><span class="p">,</span> <span class="n">coins</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;Execute a message to perform an action on a given contract, returning the result</span>

<span class="sd">        Args:</span>
<span class="sd">            contract_addr (str): The contract to execute a msg on </span>
<span class="sd">            execute_msg (dict): The msg to execute on the contract</span>
<span class="sd">            coins (list, optional): Coins which may be needed for the execution tx. Defaults to [].</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: execution results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">MsgExecuteContract</span><span class="p">(</span>
            <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">acc_address</span><span class="p">,</span>
            <span class="n">contract</span><span class="o">=</span><span class="n">contract_addr</span><span class="p">,</span>
            <span class="n">execute_msg</span><span class="o">=</span><span class="n">execute_msg</span><span class="p">,</span>
            <span class="n">coins</span><span class="o">=</span><span class="n">coins</span>
        <span class="p">)</span>
        <span class="n">exe_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_msg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">exe_result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">exe_result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">query_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_addr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query_msg</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Perform a query on a given contract, returning the result</span>

<span class="sd">        Args:</span>
<span class="sd">            contract_addr (str): The contract to perform the query on </span>
<span class="sd">            query_msg (dict): The query to perform</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Query Result</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query to be ran </span><span class="si">{</span><span class="n">query_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">query_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">wasm</span><span class="o">.</span><span class="n">contract_query</span><span class="p">(</span><span class="n">contract_addr</span><span class="p">,</span> <span class="n">query_msg</span><span class="p">)</span>

        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">query_result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">query_result</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">query_code_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query to be ran </span><span class="si">{</span><span class="n">code_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># query_result = self.client.wasm.code_info(code_id)</span>
        <span class="c1"># query_two = self.client.wasm._c._get(f&quot;/wasm/codes/{code_id}&quot;)</span>

        <span class="n">query_raw</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://bombay-lcd.terra.dev/wasm/codes/</span><span class="si">{</span><span class="n">code_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">query_raw</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">query_code_bytecode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query to be ran </span><span class="si">{</span><span class="n">code_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># query_result = self.client.wasm.code_info(code_id)</span>
        <span class="c1"># query_two = self.client.wasm._c._get(f&quot;/wasm/codes/{code_id}&quot;)</span>
        <span class="c1"># TODO: This query is not cross-chain capable </span>
        <span class="n">query_raw</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://bombay-lcd.terra.dev/terra/wasm/v1beta1/codes/36374/byte_code&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">query_raw</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">










  <div class="doc doc-object doc-method">



<h5 id="capsule.lib.deployer.Deployer.execute_contract" class="doc doc-heading">
<code class="highlight language-python"><span class="n">execute_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_addr</span><span class="p">,</span> <span class="n">execute_msg</span><span class="p">,</span> <span class="n">coins</span><span class="o">=</span><span class="p">[])</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Execute a message to perform an action on a given contract, returning the result</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>contract_addr</code></td>
        <td><code>str</code></td>
        <td><p>The contract to execute a msg on </p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>execute_msg</code></td>
        <td><code>dict</code></td>
        <td><p>The msg to execute on the contract</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>coins</code></td>
        <td><code>list</code></td>
        <td><p>Coins which may be needed for the execution tx. Defaults to [].</p></td>
        <td><code>[]</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>execution results</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/lib/deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">execute_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_addr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">execute_msg</span><span class="p">,</span> <span class="n">coins</span> <span class="o">=</span> <span class="p">[]):</span>
    <span class="sd">&quot;&quot;&quot;Execute a message to perform an action on a given contract, returning the result</span>

<span class="sd">    Args:</span>
<span class="sd">        contract_addr (str): The contract to execute a msg on </span>
<span class="sd">        execute_msg (dict): The msg to execute on the contract</span>
<span class="sd">        coins (list, optional): Coins which may be needed for the execution tx. Defaults to [].</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: execution results</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">MsgExecuteContract</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">acc_address</span><span class="p">,</span>
        <span class="n">contract</span><span class="o">=</span><span class="n">contract_addr</span><span class="p">,</span>
        <span class="n">execute_msg</span><span class="o">=</span><span class="n">execute_msg</span><span class="p">,</span>
        <span class="n">coins</span><span class="o">=</span><span class="n">coins</span>
    <span class="p">)</span>
    <span class="n">exe_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_msg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">exe_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">exe_result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="capsule.lib.deployer.Deployer.instantiate_contract" class="doc doc-heading">
<code class="highlight language-python"><span class="n">instantiate_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">,</span> <span class="n">init_msg</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>instantiate_contract attempts to 
instantiate a code object with an init msg 
into a live contract on the network. </p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>code_id</code></td>
        <td><code>str</code></td>
        <td><p>The code_id of the stored wasm contract artifact</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>init_msg</code></td>
        <td><code>dict</code></td>
        <td><p>The init msg to send to setup the contract</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The contracts address</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/lib/deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">instantiate_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">init_msg</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;instantiate_contract attempts to </span>
<span class="sd">    instantiate a code object with an init msg </span>
<span class="sd">    into a live contract on the network. </span>

<span class="sd">    Args:</span>
<span class="sd">        code_id (str): The code_id of the stored wasm contract artifact</span>
<span class="sd">        init_msg (dict): The init msg to send to setup the contract</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The contracts address</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">MsgInstantiateContract</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">acc_address</span><span class="p">,</span>
        <span class="n">admin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">acc_address</span><span class="p">,</span>
        <span class="n">code_id</span><span class="o">=</span><span class="n">code_id</span><span class="p">,</span>
        <span class="n">init_msg</span><span class="o">=</span><span class="n">init_msg</span>
    <span class="p">)</span>

    <span class="n">instantiation_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_msg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">instantiation_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">get_contract_address</span><span class="p">(</span><span class="n">instantiation_result</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="capsule.lib.deployer.Deployer.query_code_bytecode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query_code_bytecode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      

        <details class="quote">
          <summary>Source code in <code>capsule/lib/deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">query_code_bytecode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query to be ran </span><span class="si">{</span><span class="n">code_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># query_result = self.client.wasm.code_info(code_id)</span>
    <span class="c1"># query_two = self.client.wasm._c._get(f&quot;/wasm/codes/{code_id}&quot;)</span>
    <span class="c1"># TODO: This query is not cross-chain capable </span>
    <span class="n">query_raw</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://bombay-lcd.terra.dev/terra/wasm/v1beta1/codes/36374/byte_code&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">query_raw</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="capsule.lib.deployer.Deployer.query_code_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query_code_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      

        <details class="quote">
          <summary>Source code in <code>capsule/lib/deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">query_code_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query to be ran </span><span class="si">{</span><span class="n">code_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># query_result = self.client.wasm.code_info(code_id)</span>
    <span class="c1"># query_two = self.client.wasm._c._get(f&quot;/wasm/codes/{code_id}&quot;)</span>

    <span class="n">query_raw</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;https://bombay-lcd.terra.dev/wasm/codes/</span><span class="si">{</span><span class="n">code_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">query_raw</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="capsule.lib.deployer.Deployer.query_contract" class="doc doc-heading">
<code class="highlight language-python"><span class="n">query_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_addr</span><span class="p">,</span> <span class="n">query_msg</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>Perform a query on a given contract, returning the result</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>contract_addr</code></td>
        <td><code>str</code></td>
        <td><p>The contract to perform the query on </p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>query_msg</code></td>
        <td><code>dict</code></td>
        <td><p>The query to perform</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>dict</code></td>
      <td><p>Query Result</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/lib/deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">query_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_addr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query_msg</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Perform a query on a given contract, returning the result</span>

<span class="sd">    Args:</span>
<span class="sd">        contract_addr (str): The contract to perform the query on </span>
<span class="sd">        query_msg (dict): The query to perform</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Query Result</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query to be ran </span><span class="si">{</span><span class="n">query_msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">query_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">wasm</span><span class="o">.</span><span class="n">contract_query</span><span class="p">(</span><span class="n">contract_addr</span><span class="p">,</span> <span class="n">query_msg</span><span class="p">)</span>

    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">query_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">query_result</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="capsule.lib.deployer.Deployer.send_msg" class="doc doc-heading">
<code class="highlight language-python"><span class="n">send_msg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>send_msg attempts to create 
and sign a transaction with the provided
msg and then broadcasts the tx</p>

        <details class="quote">
          <summary>Source code in <code>capsule/lib/deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">send_msg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;send_msg attempts to create </span>
<span class="sd">    and sign a transaction with the provided</span>
<span class="sd">    msg and then broadcasts the tx</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">create_and_sign_tx</span><span class="p">(</span>
        <span class="n">msgs</span><span class="o">=</span><span class="p">[</span><span class="n">msg</span><span class="p">],</span> <span class="n">fee</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">std_fee</span>
    <span class="p">)</span>
    <span class="c1"># estimated = self.client.tx.estimate_fee(tx, fee_denoms=[&quot;uusd&quot;], msgs=[msg])</span>
    <span class="c1"># LOG.info(f&#39;estimated fee: {estimated}&#39;)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">tx</span><span class="o">.</span><span class="n">broadcast</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="capsule.lib.deployer.Deployer.store_contract" class="doc doc-heading">
<code class="highlight language-python"><span class="n">store_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_name</span><span class="p">,</span> <span class="n">contract_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-async"><code>async</code></small>
  </span>

</h5>

    <div class="doc doc-contents ">

      <p>store_contract attempts to 
gather a given wasm artifact file 
and upload it to the given chain as a StoredCodeObject
The storage operation is done using the send_msg helper</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>contract_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the contract to deploy</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>contract_path</code></td>
        <td><code>str</code></td>
        <td><p>The path to a wasm contract artifact to deploy. Defaults to "".</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The contract storage result is parsed and just the code id of the stored code object is returned</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/lib/deployer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">store_contract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contract_name</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">contract_path</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;store_contract attempts to </span>
<span class="sd">    gather a given wasm artifact file </span>
<span class="sd">    and upload it to the given chain as a StoredCodeObject</span>
<span class="sd">    The storage operation is done using the send_msg helper</span>

<span class="sd">    Args:</span>
<span class="sd">        contract_name (str): The name of the contract to deploy</span>
<span class="sd">        contract_path (str, optional): The path to a wasm contract artifact to deploy. Defaults to &quot;&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The contract storage result is parsed and just the code id of the stored code object is returned</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If the full path was provided, use it else assume its located in artifacts</span>
    <span class="nb">bytes</span> <span class="o">=</span> <span class="n">read_file_as_b64</span><span class="p">(</span><span class="n">contract_path</span> <span class="k">if</span> <span class="n">contract_path</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;artifacts/</span><span class="si">{</span><span class="n">contract_name</span><span class="si">}</span><span class="s2">.wasm&quot;</span><span class="p">)</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">MsgStoreCode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deployer</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">acc_address</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
    <span class="n">contract_storage_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_msg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">contract_storage_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">get_code_id</span><span class="p">(</span><span class="n">contract_storage_result</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>



  <div class="doc doc-object doc-module">



<h3 id="capsule.lib.logging_handler" class="doc doc-heading">
        <code>logging_handler</code>



</h3>

    <div class="doc doc-contents ">

      <p>Once Place for logging stuff</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h4 id="capsule.lib.logging_handler.setup_logger" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_logger</span><span class="p">(</span><span class="n">logger_name</span><span class="o">=</span><span class="s1">&#39;capsule&#39;</span><span class="p">,</span> <span class="n">extra_kwargs</span><span class="o">=</span><span class="p">{})</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Simple wrapper to setup a logger and return it.
Used by the LOG constant which is used through the project</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>logger_name</code></td>
        <td><code>str</code></td>
        <td><p>The name for the logger. Defaults to "capsule".</p></td>
        <td><code>&#39;capsule&#39;</code></td>
      </tr>
      <tr>
        <td><code>extra_kwargs</code></td>
        <td><code>dict</code></td>
        <td><p>Any extra options to use with the logger. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>capsule/lib/logging_handler.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">setup_logger</span><span class="p">(</span><span class="n">logger_name</span><span class="o">=</span><span class="s2">&quot;capsule&quot;</span><span class="p">,</span> <span class="n">extra_kwargs</span><span class="o">=</span><span class="p">{}):</span>
    <span class="sd">&quot;&quot;&quot;Simple wrapper to setup a logger and return it.</span>
<span class="sd">    Used by the LOG constant which is used through the project</span>

<span class="sd">    Args:</span>
<span class="sd">        logger_name (str, optional): The name for the logger. Defaults to &quot;capsule&quot;.</span>
<span class="sd">        extra_kwargs (dict, optional): Any extra options to use with the logger. Defaults to {}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logger_name</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_kwargs</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="c1"># Setup a StreamHandler to give output to the logs</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
    <span class="c1"># Establish a log format for messages</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s1">&#39;[capsule:</span><span class="si">%(module)s</span><span class="s1">] </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">))</span>
    <span class="c1"># Add handler to logger</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">logger</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>




  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.361d90f1.min.js"}</script>
    
    
      <script src="assets/javascripts/bundle.289a2a4b.min.js"></script>
      
    
  </body>
</html>